# mtrpz lab 04: Url shortener
## Контекст та область застосування

***Автори***:
***Платунов Юрій IM-33*** Backend Developer / Team Lead
Відповідає за архітектуру сервісу, реалізацію бізнес-логіки, інтеграцію з базою даних та основні API.
***Скрипник Михайло IM-33*** — Backend Developer
Відповідає за розробку та тестування окремих підсистем (наприклад, авторизації та аналітики), допомогу з розробкою HTTP-інтерфейсу, написання unit-тестів.

**Формат співпраці**: Ми працюємо як команда з двох бекенд-розробників, використовуючи Git для спільної розробки, code-review та ведення історії змін. Front-end не плануємо робити (можливо, базова Swagger-UI чи Postman для тестування).

### Мета проєкту
Освоїти спільну роботу з Git, створити невеликий, але корисний pet-проект з реального життя, попрактикуватися у створенні повноцінного backend-сервісу з роботою з базою даних та інтеграцією кількох підсистем.
### Проблема

Довгі URL-адреси незручні для поширення в соціальних мережах, SMS, друкованих матеріалах та інших каналах комунікації. Користувачам потрібен сервіс, який може створювати короткі, зручні для запам'ятовування посилання та надавати детальну аналітику переходів.

## Цілі
-  Надати можливість користувачам скорочувати довгі URL-адреси до коротких посилань. 
- Забезпечити перенаправлення з короткого посилання на оригінальний URL. 
- Давати прозору статистику по скороченому посиланню
- Створити зручний REST API для роботи з сервісом (створення, перегляд, видалення посилань). 
**Проект створюється не для:**
- Підтримки кастомних доменів або індивідуального налаштування вигляду короткого посилання. 
- Впровадження розширеної аналітики (геолокація, унікальні користувачі, джерела переходів тощо). 
- Розробки користувацького інтерфейсу (веб або мобільний фронтенд). 
- Складна система аналітики (тільки базова статистика)
- Мобільні додатки (тільки веб-інтерфейс)
- Персоналізовані короткі посилання (тільки випадкова генерація)

## Підсистеми

1. Business logic
2. Data storage subsystem subsystem
3. kafka analitycs of clicking events

### Високорівнева архітектура

Система використовує serverless архітектуру на базі AWS Lambda та складається з наступних підсистем:

- **Data Storage Subsystem**: Зберігання даних користувачів та посилань
- **Business Logic Subsystem**: Основна логіка скорочення URL та аналітики
### Технологічний стек

- **Backend**: AWS Lambda функції (Kotlin)
- **База даних**: DynamoDB (основні дані)
- **Message Queue**: AWS MSK
- **API Gateway**: AWS API Gateway

#### Взаємодія підсистем

**Створення і з'єднання підсистем:**

- Використання AWS SAM (Serverless Application Model) для deployment
- Environment Variables для передачі конфігурації між Lambda функціями
- AWS IAM ролі для контролю доступу між сервісами
- AWS EventBridge для асинхронної комунікації між підсистемами

### Business Logic Subsystem

**Що робить Business Logic підсистема:**

- **Shortens links** - створює короткі URL з довгих
- **Redirects users** - перенаправляє з коротких URL на оригінальні довгі URL
- **Processes analytics** - збирає та обробляє статистику використання

### Data Storage Subsystem

**Що зберігає підсистема:**

- **Session tokens** - JWT токени та metadata активних сесій
- **Shortened links** - mapping між короткими кодами та оригінальними URL
- **Analytics data** - статистика кліків та поведінка користувачів

**Data Persistence Strategy:**

**High Availability:**

- DynamoDB: Multi-AZ replication автоматично
- S3: 99.999999999% (11 9's) durability

**Backup Strategy:**

- DynamoDB: Point-in-time recovery + daily backups
- Redis: Persistence не потрібна (тільки cache)
- S3: Cross-region replication для критичних даних

**Disaster Recovery:**

- RTO (Recovery Time Objective): < 4 години
- RPO (Recovery Point Objective): < 1 година
- Automated failover через AWS infrastructure


![[mtrpz-lab-4.drawio.png]]

